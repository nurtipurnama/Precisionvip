<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sports Match Analyzer Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Prevent zoom on mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
    <div class="container">
        <header>
            <h1>Sports Match Analyzer Pro</h1>
            <p class="subtitle">Advanced Monte Carlo Analysis for Sports Predictions</p>
        </header>

        <main>
            <!-- Team Information Section -->
            <section class="card" id="team-setup">
                <h2><span class="material-symbols-outlined">groups</span> Team Information</h2>
                <form id="team-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="team1">Team 1 Name</label>
                            <input type="text" id="team1" placeholder="Enter team name" required>
                        </div>
                        <div class="form-group">
                            <label for="team2">Team 2 Name</label>
                            <input type="text" id="team2" placeholder="Enter team name" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="team1-ranking">Team 1 Ranking</label>
                            <input type="number" id="team1-ranking" placeholder="Ranking (optional)" min="1">
                        </div>
                        <div class="form-group">
                            <label for="team2-ranking">Team 2 Ranking</label>
                            <input type="number" id="team2-ranking" placeholder="Ranking (optional)" min="1">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="match-importance">Match Importance</label>
                            <select id="match-importance">
                                <option value="regular">Regular</option>
                                <option value="tournament">Tournament</option>
                                <option value="cup">Cup</option>
                                <option value="championship">Championship</option>
                                <option value="friendly">Friendly</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="match-type">Match Type</label>
                            <select id="match-type">
                                <option value="regular-round">Regular Match Round</option>
                                <option value="final">Final</option>
                                <option value="relegations">Relegations</option>
                                <option value="playoffs">Playoffs</option>
                                <option value="knockout-stage">Knockout Stage</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="sports-type">Sports Type</label>
                            <select id="sports-type" required>
                                <option value="">Select Sport</option>
                                <option value="basketball">Basketball</option>
                                <option value="football">Football (Soccer)</option>
                                <option value="others">Others</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="match-location">Location</label>
                            <select id="match-location" required>
                                <option value="neutral">Neutral</option>
                                <option value="home">Home (Team 1)</option>
                                <option value="away">Away (Team 2)</option>
                            </select>
                        </div>
                    </div>
                </form>
            </section>

            <!-- Match Data Section -->
            <section class="card" id="match-data">
                <h2><span class="material-symbols-outlined">analytics</span> Match Data</h2>
                
                <!-- Head-to-Head Matches -->
                <div class="score-input-container">
                    <h3><span class="material-symbols-outlined">scoreboard</span> Head-to-Head Matches</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="h2h-team1-label">Team 1 Scores (comma separated)</label>
                            <input type="text" id="h2h-team1" placeholder="e.g. 2,1,3,0,1">
                        </div>
                        <div class="form-group">
                            <label id="h2h-team2-label">Team 2 Scores (comma separated)</label>
                            <input type="text" id="h2h-team2" placeholder="e.g. 1,2,1,2,0">
                        </div>
                    </div>
                </div>

                <!-- Last Matches Team 1 -->
                <div class="score-input-container">
                    <h3><span class="material-symbols-outlined">history</span> Last Matches Team 1</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="team1-scores-label">Team 1 Scores (comma separated)</label>
                            <input type="text" id="team1-scores" placeholder="e.g. 2,3,1,4,0">
                        </div>
                        <div class="form-group">
                            <label id="team1-opponent-label">Opponent Scores (comma separated)</label>
                            <input type="text" id="team1-opponent" placeholder="e.g. 1,2,2,1,1">
                        </div>
                    </div>
                </div>

                <!-- Last Matches Team 2 -->
                <div class="score-input-container">
                    <h3><span class="material-symbols-outlined">history</span> Last Matches Team 2</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="team2-scores-label">Team 2 Scores (comma separated)</label>
                            <input type="text" id="team2-scores" placeholder="e.g. 1,2,0,3,2">
                        </div>
                        <div class="form-group">
                            <label id="team2-opponent-label">Opponent Scores (comma separated)</label>
                            <input type="text" id="team2-opponent" placeholder="e.g. 0,1,2,2,1">
                        </div>
                    </div>
                </div>

                <!-- Data Summary -->
                <div class="data-summary">
                    <h3>Data Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">H2H Matches:</span>
                            <span id="h2h-count">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Team 1 Recent:</span>
                            <span id="team1-count">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Team 2 Recent:</span>
                            <span id="team2-count">0</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Betting Lines Section -->
            <section class="card" id="betting-lines">
                <h2><span class="material-symbols-outlined">monetization_on</span> Betting Lines (Optional)</h2>
                <div class="betting-lines-info">
                    <p><span class="material-symbols-outlined">info</span> Enter betting lines to get over/under and spread analysis</p>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="total-line">Total Line</label>
                        <input type="number" id="total-line" placeholder="Total goals/points (e.g. 2.5)" step="0.5" min="0">
                        <small>This will show as a line in the Total Score Analysis chart</small>
                    </div>
                    <div class="form-group">
                        <label for="spread-line">Spread Line</label>
                        <input type="number" id="spread-line" placeholder="Point spread (e.g. 1.5)" step="0.5">
                        <small>Handicap line for the favored team</small>
                    </div>
                    <div class="form-group">
                        <label for="favored-team">Favored Team</label>
                        <select id="favored-team">
                            <option value="team1">Team 1</option>
                            <option value="team2">Team 2</option>
                        </select>
                        <small>Which team is expected to win by the spread</small>
                    </div>
                </div>
            </section>

            <!-- Analysis Button -->
            <button id="analyze-button" class="btn btn-primary btn-large">
                <span class="material-symbols-outlined">precision_manufacturing</span> Run Precision Analysis
            </button>

            <!-- Results Section -->
            <section class="card results-section" id="results">
                <h2><span class="material-symbols-outlined">insights</span> Analysis Results</h2>
                
                <!-- Loading State -->
                <div id="analysis-loading" class="hidden loading-container">
                    <div class="spinner"></div>
                    <p>Running Monte Carlo simulations...</p>
                    <div class="loading-details">
                        <span class="material-symbols-outlined">calculate</span>
                        <span>Analyzing 10,000 match scenarios</span>
                    </div>
                </div>

                <!-- Results Content -->
                <div id="analysis-results" class="hidden">
                    <!-- Market Probabilities -->
                    <div class="probability-section">
                        <h3><span class="material-symbols-outlined">trending_up</span> All Market Probabilities</h3>
                        <div class="probability-grid">
                            <div class="probability-card">
                                <h4>Match Outcome</h4>
                                <div id="match-outcome-probs"></div>
                            </div>
                            <div class="probability-card">
                                <h4>Double Chance</h4>
                                <div id="double-chance-probs"></div>
                            </div>
                            <div class="probability-card">
                                <h4>Both Teams to Score</h4>
                                <div id="btts-probs"></div>
                            </div>
                            <div class="probability-card">
                                <h4>Total Goals/Points</h4>
                                <div id="total-probs"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Factor Analysis -->
                    <div class="factor-analysis">
                        <h3><span class="material-symbols-outlined">psychology</span> Factor Analysis</h3>
                        <div id="factor-breakdown"></div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-section">
                        <h3><span class="material-symbols-outlined">analytics</span> Visual Analysis</h3>
                        <div class="chart-row">
                            <div class="chart-card main-chart">
                                <h4><span class="material-symbols-outlined">timeline</span> Total Score Analysis</h4>
                                <div class="chart-description">
                                    <p>Historical match totals with betting line overlay</p>
                                </div>
                                <div class="chart-container">
                                    <canvas id="total-score-chart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <h4><span class="material-symbols-outlined">bar_chart</span> Score Distribution</h4>
                                <div class="chart-description">
                                    <p>Frequency distribution of simulated total scores</p>
                                </div>
                                <div class="chart-container">
                                    <canvas id="score-distribution-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="chart-row">
                            <div class="chart-card">
                                <h4><span class="material-symbols-outlined">pie_chart</span> Match Outcome Distribution</h4>
                                <div class="chart-description">
                                    <p>Probability breakdown of match results</p>
                                </div>
                                <div class="chart-container">
                                    <canvas id="outcome-pie-chart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <h4><span class="material-symbols-outlined">donut_large</span> Over/Under Distribution</h4>
                                <div class="chart-description">
                                    <p>Total score over/under betting analysis</p>
                                </div>
                                <div class="chart-container">
                                    <canvas id="over-under-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="chart-row">
                            <div class="chart-card full-width">
                                <h4><span class="material-symbols-outlined">sports</span> Spread Coverage Distribution</h4>
                                <div class="chart-description">
                                    <p>Point spread betting analysis and coverage probability</p>
                                </div>
                                <div class="chart-container">
                                    <canvas id="spread-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Explanation Section -->
                    <div class="explanation-section">
                        <h3><span class="material-symbols-outlined">description</span> Analysis Explanation</h3>
                        <div id="detailed-explanation"></div>
                    </div>

                    <!-- Export Options -->
                    <div class="export-section">
                        <h3><span class="material-symbols-outlined">download</span> Export Options</h3>
                        <div class="export-buttons">
                            <button class="btn btn-secondary" onclick="window.print()">
                                <span class="material-symbols-outlined">print</span> Print Results
                            </button>
                            <button class="btn btn-secondary" id="export-data">
                                <span class="material-symbols-outlined">file_download</span> Export Data
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Sports Match Analyzer Pro &copy; 2025 - Advanced Monte Carlo Analysis</p>
            <p class="footer-note">
                <span class="material-symbols-outlined">info</span>
                This tool provides statistical analysis based on historical data. Always gamble responsibly.
            </p>
        </footer>
    </div>
    <script src="script.js"></script>
</body>
</html>